<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Filtering Methods for DataComp</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/d3-simple-slider"></script>
    <link rel="stylesheet" href="tufte.css"/>
    <style>
        body {
            padding-left: 0%;
        }
        .chart {
            display: block;
            margin: auto;
        }
        .dot {
            stroke: #000;
        }
        .tooltip {
            position: absolute;
            text-align: center;
            width: auto;
            height: auto;
            padding: 5px;
            font: 12px sans-serif;
            background: lightsteelblue;
            border: 0;
            border-radius: 8px;
            pointer-events: none;
        }
        .container {
            display: flex;
        }
        #scatterPlot {
            flex: 1;
        }
        #imageContainer {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #selectedImage {
            max-width: 100%;
            max-height: 100%;
        }
        #imageCaption {
            margin-top: 10px;
            font: 14px sans-serif;
        }
        #filterContainerWrapper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin: 20px 0;
            text-align: center;
        }
        #filterContainer {
            flex: 1;
        }
        #filterText {
            flex: 1;
            margin-left: 20px;
            font-size: 14px sans-serif;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>Filtering Methods for DataComp</h1>
    <p>Data is the fuel for modern vision-language models. Nowadays, machine learning researchers are experimenting with various methods for curating the training data, including deduplication, recaptioning, and filtering. </p>
    <p>This is a visualization for better understanding the data pool and baseline filters used in <a href='https://arxiv.org/pdf/2304.14108'>the DataComp paper</a>. The 5868 image-text pairs are randomly sampled from the DataComp-small data pool. We employ t-SNE on the concatenation of CLIP image and text features for embedding the pairs, and use color to encode their CLIP score, which serves as the matching score of the image and text. </p>
    <p>Try different values and combinations of the filters by yourself, and see what they actually do. Are they effective in finding low-quality data? Are they biased? What are some better methods for data curation? Your idea could make a difference!</p>
    <div class="container">
        <div id="scatterPlot"></div>
        <div id="imageContainer">
            <img id="selectedImage" src="">
            <div id="imageCaption">Click a dot to display an image and its caption</div>
        </div>
    </div>
    <div id="filterContainerWrapper">
        <div id="filterContainer">
        </div>
        <div id="filterText">
            <p>Adjust the filters using the sliders on the left or click on the following values used in baseline filters:</p>
            <ul>
                <li><span id="clipScoreValues"></span></li>
            </ul>
            <p>Also try Basic filtering below:</p>
            <ul>
                <li><span id="captionLengthValues"></span></li>
            </ul>
            <svg id="basicFilters"></svg>
        </div>
    </div>
    <p>Recommendations for your exploration: (1) How do the filters interact with each other? For example, does Basic filtering still help after applying CLIP score > 30? (2) Do the baseline filters throw out anything that might be useful for model training? (3) Try locating some semantically meaningful clusters, and observe how they change with your filter.</p>
    <script src="scatterplot.js"></script>
</body>
</html>
